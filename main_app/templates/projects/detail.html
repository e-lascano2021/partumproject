{% extends 'base.html' %}
{% load static %}

{% block head %}
<link 
  rel="stylesheet" 
  type="text/css" 
  href="{% static 'css/project-detail.css' %}"
/>
{% endblock %}

{% block content %}

<section class="project-container">
  <div class="project-img">
    {% if project.photo.url %}
      <img 
        src="{{ project.photo.url }}" 
        alt="A photo of {{ project.name }}"
      >
    {% else %}
      <img 
        src="{% static 'images/' %}" 
        alt=""
      >
    {% endif %}
  </div>
  <div class="project-details">
    <h1>{{ project.name }}</h1>
    <p>{{ project.progress }}</p>
    <div class="project-actions">
      <a href="{% url 'projects_update' project.id %}" class="btn warn"><i class="far fa-edit"></i></a>
      <a href="{% url 'projects_delete' project.id %}" class="btn danger"><i class="fas fa-trash-alt"></i></a>
    </div>
    <h3>Change {{ project.name }}'s photo</h3>
    <p id="file-name"></p>
    <form 
      action="{% url 'add_photo' project.id %}"
      enctype="multipart/form-data"
      method="POST"
    >
      {% csrf_token %}
      <label class="btn secondary">
        Choose photo
        <input type="file" name="photo-file" id="file-input">
      </label>
      <button type="submit" class="btn submit"><i class="fas fa-arrow-circle-up"></i></button>
    </form>
  </div>
</section>



<section>
  <div>
    <h2>Features</h2>
    <img src="{% static 'images/' %}" alt="" />
    <img src="{% static 'images/' %}" alt="" />
    <img src="{% static 'images/' %}" alt="" />
  </div>


  <div projects-feature-container>
    <h3>Features Included</h3>
    <div class="subsection-content">
      {% if project.features.count %}
        {% for feature in project.features.all %}
          <div class="feature-container">
            <p>{{ feature.name }} - {{ feature.difficulty }}</p>
            <form action="{% url 'unassoc_feature' project.id feature.id %}" method="post">
              {% csrf_token %}
                <button type="submit" class="btn submit"><i class="fas fa-minus"></i></button>
            </form>
          </div>
        {% endfor %}
      {% else %}
        <p class="all-features"> There are no Features Included</p>
      {% endif %}
    </div>
  </div>

  <div class="">
    <h3>Available Features</h3>
    <div>
      {% if features.count %}
        {% for feature in features.all %}
          <div>
            <p>{{ feature.name }} - {{ feature.difficulty }}</p>
            <form action="{% url 'assoc_feature' project.id feature.id %}" method="post">
              {% csrf_token %}
                <button type="submit" class="btn submit"><i class="fas fa-plus"></i></button>
            </form>
          </div>
        {% endfor %}
      {% else %}
        <p>
          You have added all available features to this project
        </p>
      {% endif %}
    </div>
  </div>
</section>


{% endblock %}